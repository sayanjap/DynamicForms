{% extends 'examples/base.html' %}
{% block head_extra %}
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/axios@0.16.2/dist/axios.min.js" crossorigin="anonymous"></script>
{% endblock %}
{% block title %}Render in template example{% endblock %}
{% block body %}

  <div id="app">
    {{ page_data }}
  </div>

  <script>
    // register component, component is x-template type component
    Vue.component('table-grid-component', {
      props: ['url', 'columns'],
      data() {
        return {
          rows: [],
        }
      },
      mounted() {
        const self = this;
        self.loading = true;
        axios.get(this.url).then(function (res) {
          // call api and set data as response, when data is set component is re-rendered
          self.rows = res.data;
        }).catch(function (err) {
          alert(err.data)
        }).always(function () {
          self.loading = false;
        });
      },
      methods: {}
    })

    // create vue app with app dic container
    const tableApp = new Vue({
      el: `#app`,
    });
  </script>

{% endblock %}